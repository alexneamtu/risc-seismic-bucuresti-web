{"version":3,"sources":["logo.svg","search.svg","Search.js","index.js"],"names":["module","exports","Search","state","address","addressNumber","items","initial","error","handleOnChange","evt","setState","target","name","value","handleSearch","e","preventDefault","streetNumber","match","join","streetName","replace","trim","console","log","makeApiCall","apiUrl","process","REACT_APP_API_URL","searchUrl","fetch","then","response","json","jsonData","catch","this","addrInput","focus","id","src","logo","className","alt","href","onSubmit","ref","input","type","placeholder","onChange","event","required","onClick","disabled","searchIcon","length","map","item","index","key","street_type","buildingRatings","seismicRating","Intl","DateTimeFormat","year","month","day","format","Date","updatedAt","district","apartmentNumber","heightRegime","yearOfConstruction","yearOfExpertise","expertName","surfaceSize","comments","Component","ReactDOM","render","document","getElementById"],"mappings":"uIAAAA,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,sPC6G5BC,E,2MAvGXC,MAAQ,CACJC,QAAS,GACTC,cAAe,GACfC,MAAO,GACPC,SAAS,EACTC,OAAO,G,EAOXC,eAAiB,SAACC,GACd,EAAKC,SAAL,eACO,EAAKR,MADZ,eAEKO,EAAIE,OAAOC,KAAOH,EAAIE,OAAOE,U,EAItCC,aAAe,SAACC,GAAO,IAAD,EAClBA,EAAEC,iBAEF,IAAMC,GAAe,YAAKf,MAAMC,QAAQe,MAAM,cAAzB,eAAiCC,KAAK,MAAO,GAC5DC,EAAa,EAAKlB,MAAMC,QAAQkB,QAAQJ,EAAc,IAAII,QAAQ,cAAe,IAAIC,OAC3FC,QAAQC,IAAI,EAAKtB,MAAMC,QAASiB,EAAYH,GAE5C,EAAKQ,YAAYL,EAAYH,I,EAGjCQ,YAAc,SAACtB,EAASC,GACpB,IAAMsB,EAASC,8IAAYC,mBAAqB,+CAC1CC,EAAS,UAAMH,EAAN,2BAA+BvB,EAA/B,mBAAiDC,GAChE0B,MAAMD,GACDE,MAAK,SAAAC,GAEF,OADA,EAAKtB,SAAS,CAAEJ,SAAS,IAClB0B,EAASC,UAEnBF,MAAK,SAAAG,GACF,EAAKxB,SAAS,CAAEL,MAAO6B,OACxBC,OAAM,WACL,EAAKzB,SAAS,CAAEH,OAAO,Q,mFA/B/B6B,KAAKC,UAAUC,U,+BAmCT,IAAD,OACL,OACI,yBAAKC,GAAG,QACJ,yBAAKC,IAAKC,IAAMC,UAAU,OAAOC,IAAI,SACrC,wBAAID,UAAU,SAAd,yCACA,qEAA0C,uBAAGE,KAAK,mEAAR,SAC1C,6BACA,0BAAMF,UAAU,cAAcG,SAAUT,KAAKtB,cACzC,2BACIgC,IAAK,SAACC,GAAY,EAAKV,UAAYU,GACnCnC,KAAK,UACLoC,KAAK,OACLC,YAAY,0BACZC,SAAU,SAAAC,GAAK,OAAI,EAAK3C,eAAe2C,IACvCtC,MAAOuB,KAAKlC,MAAMC,QAClBiD,UAAQ,IAEZ,4BAAQC,QAASjB,KAAKtB,aAAcwC,UAAWlB,KAAKlC,MAAMC,SAA1D,SACA,yBAAKqC,IAAKe,IAAYZ,IAAI,cAAcD,UAAU,UAGtD,yBAAKH,GAAG,cACFH,KAAKlC,MAAMI,SAAY8B,KAAKlC,MAAMG,MAAMmD,OAA2D,GAAlD,iDAEvD,yBAAKjB,GAAG,SACHH,KAAKlC,MAAMK,MAAQ,0CAA4C,IAEnE6B,KAAKlC,MAAMG,MAAMmD,OAAS,GACvB,yBAAKjB,GAAG,mBACHH,KAAKlC,MAAMG,MAAMoD,KAAI,SAACC,EAAMC,GAAP,OAClB,yBAAKjB,UAAU,cAAckB,IAAKD,GAC9B,4BAAKD,EAAKG,YAAV,IAAwBH,EAAKvD,QAA7B,KAAwCuD,EAAKtD,eAC7C,uBAAGsC,UAAU,UAAb,cAAkCgB,EAAKI,gBAAgB,GAAGC,eAC1D,4BACI,4CAAkB,IAAIC,KAAKC,eAAe,QAAS,CAC/CC,KAAM,UACNC,MAAO,OACPC,IAAK,YACNC,OAAO,IAAIC,KAAKZ,EAAKa,aACxB,uCAAab,EAAKc,UAClB,kDAAwBd,EAAKe,iBAC7B,+CAAqBf,EAAKgB,cAC1B,+CAAqBhB,EAAKiB,oBAC1B,6CAAmBjB,EAAKkB,iBACxB,8CAAoBlB,EAAKmB,YACzB,0CAAgBnB,EAAKoB,aACpBpB,EAAKqB,UACF,2CAAiBrB,EAAKqB,qB,GA5FzCC,aCArBC,IAASC,OAAO,kBAAC,EAAD,MAAYC,SAASC,eAAe,W","file":"static/js/main.955c6b94.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.4612253a.svg\";","module.exports = __webpack_public_path__ + \"static/media/search.c93e3592.svg\";","import React, { Component } from \"react\";\nimport \"./Search.scss\";\nimport logo from './logo.svg';\nimport searchIcon from './search.svg';\n\nclass Search extends Component {\n    state = {\n        address: \"\",\n        addressNumber: \"\",\n        items: [],\n        initial: true,\n        error: false,\n    };\n\n    componentDidMount() {\n        this.addrInput.focus();\n    }\n\n    handleOnChange = (evt) => {\n        this.setState({\n            ...this.state,\n            [evt.target.name]: evt.target.value,\n        })\n    };\n\n    handleSearch = (e) => {\n        e.preventDefault();\n\n        const streetNumber = this.state.address.match(/\\d/g)?.join('') || '';\n        const streetName = this.state.address.replace(streetNumber, '').replace(/[^A-Za-z ]/g, '').trim();\n        console.log(this.state.address, streetName, streetNumber)\n\n        this.makeApiCall(streetName, streetNumber);\n    };\n\n    makeApiCall = (address, addressNumber) => {\n        const apiUrl = process.env.REACT_APP_API_URL || 'https://risc-seismic-bucuresti.herokuapp.com';\n        const searchUrl = `${apiUrl}/routes?address=${address}&number=${addressNumber}`;\n        fetch(searchUrl)\n            .then(response => {\n                this.setState({ initial: false });\n                return response.json();\n            })\n            .then(jsonData => {\n                this.setState({ items: jsonData });\n            }).catch(() => {\n                this.setState({ error: true });\n            });\n    };\n\n    render() {\n        return (\n            <div id=\"main\">\n                <img src={logo} className=\"logo\" alt=\"logo\" />\n                <h1 className=\"title\">Cautare rapida risc seismic Bucuresti</h1>\n                <p>Pentru orice problema creati un tichet <a href=\"https://github.com/alexneamtu/risc-seismic-bucuresti-web/issues\">aici</a></p>\n                <br />\n                <form className=\"search-form\" onSubmit={this.handleSearch}>\n                    <input\n                        ref={(input) => { this.addrInput = input; }}\n                        name=\"address\"\n                        type=\"text\"\n                        placeholder=\"Ex: Regina Elisabeta 28\"\n                        onChange={event => this.handleOnChange(event)}\n                        value={this.state.address}\n                        required\n                    />\n                    <button onClick={this.handleSearch} disabled={!this.state.address}>Cauta</button>\n                    <img src={searchIcon} alt=\"Search Icon\" className=\"icon\" />\n                </form>\n\n                <div id=\"no-results\">\n                    {!this.state.initial && !this.state.items.length ? 'Cladirea nu se afla pe lista de risc seismic.' : ''}\n                </div>\n                <div id=\"error\">\n                    {this.state.error ? 'A aparut o problema. Incercati din nou.' : ''}\n                </div>\n                {this.state.items.length > 0 &&\n                    <div id=\"items-container\">\n                        {this.state.items.map((item, index) => (\n                            <div className=\"single-item\" key={index}>\n                                <h3>{item.street_type} {item.address}, {item.addressNumber}</h3>\n                                <p className=\"spaced\">Incadrare: {item.buildingRatings[0].seismicRating}</p>\n                                <ul>\n                                    <li>Actualizare: {new Intl.DateTimeFormat(\"ro-RO\", {\n                                        year: \"numeric\",\n                                        month: \"long\",\n                                        day: \"2-digit\"\n                                    }).format(new Date(item.updatedAt))}</li>\n                                    <li>Sector: {item.district}</li>\n                                    <li>Numar apartamente: {item.apartmentNumber}</li>\n                                    <li>Regim inaltime: {item.heightRegime}</li>\n                                    <li>An constructie: {item.yearOfConstruction}</li>\n                                    <li>An expertiza: {item.yearOfExpertise}</li>\n                                    <li>Expertizat de: {item.expertName}</li>\n                                    <li>Suprafata: {item.surfaceSize}</li>\n                                    {item.comments &&\n                                        <li>Comentarii: {item.comments}</li>\n                                    }\n                                </ul>\n                            </div>\n                        ))}\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Search;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Search from './Search';\n\nReactDOM.render(<Search />, document.getElementById('root'));\n"],"sourceRoot":""}